<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add Employee - Shop Owner</title>
    <link rel="stylesheet" href="/shopowner/css/shopowner_addemployee.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
</head>
<body>
    <div class="dashboard">
        <!-- Sidebar -->
        <div class="sidebar">
            <div class="logo">SHOP DASHBOARD</div>
            <div class="nav-items">
                <a href="/shopowner/html/shop_dashboard.html" class="nav-item active">
                    <i class="fas fa-tachometer-alt"></i> Dashboard
                </a>
                <a href="/shopowner/html/shopowner_addshoe.html" class="nav-item">
                    <i class="fas fa-shoe-prints"></i> Add Shoe
                </a>
                <a id="addemployeebtn" href="/shopowner/html/shopowner_addemployee.html" class="nav-item shopowner">
                    <i class="fas fa-users"></i> Add Employee
                </a>
                <a href="/shopowner/html/shop_inventory.html" class="nav-item">
                    <i class="fas fa-box"></i> Inventory
                </a>
                <a href="/shopowner/html/shop_order.html" class="nav-item">
                    <i class="fas fa-shopping-cart"></i> Orders
                </a>
                <a id="issuereport" href="/shopowner/html/issue_report.html" class="nav-item manager">
                    <i class="fas fa-chart-line"></i> Issue Report
                </a>
                <a id="analyticsbtn" href="/shopowner/html/analytics.html" class="nav-item manager">
                    <i class="fas fa-chart-line"></i> Analytics
                </a>
                <a href="/shopowner/html/shopprofile.html" class="nav-item">
                    <i class="fas fa-cog"></i> Profile Settings
                </a>
                <a id="logout_btn" class="nav-item">
                    <i class="fas fa-sign-out-alt"></i> Logout
                </a>
            </div>
        </div>
        
        <!-- Main Content -->
        <div class="form-container">
            <h1><i class="fas fa-users"></i> Add New Employee</h1>
            <form id="addEmployeeForm">
                <div class="form-group">
                    <label for="employeeName">Full Name</label>
                    <input type="text" id="employeeName" required placeholder="e.g., Juan Dela Cruz">
                </div>

                <div class="form-group">
                    <label for="employeeEmail">Email</label>
                    <input type="email" id="employeeEmail" required placeholder="e.g., employee@example.com">
                </div>
                
                <div class="form-group">
                    <label for="employeeRole">Role</label>
                    <select id="employeeRole" required>
                        <option value="">Select Role</option>
                        <option value="Manager">Manager</option>
                        <option value="SalesPerson">Sales Person</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="employeePhone">Phone Number</label>
                    <div class="phone-input-container">
                        <span class="country-code">+63</span>
                        <input type="tel" id="employeePhone" placeholder="e.g., 9123456789" maxlength="10">
                    </div>
                    <small>Enter your 10-digit Philippine mobile number (without +63)</small>
                </div>

                <div class="form-group">
                    <label for="employeePassword">Password</label>
                    <input type="password" id="employeePassword" required placeholder="Enter password">
                    <i class="fas fa-eye password-toggle" onclick="togglePassword('employeePassword')"></i>
                </div>

                <div class="form-group">
                    <label for="confirmPassword">Confirm Password</label>
                    <input type="password" id="confirmPassword" required placeholder="Confirm password">
                    <i class="fas fa-eye password-toggle" onclick="togglePassword('confirmPassword')"></i>
                </div>

                <div class="form-group">
                    <div id="passwordRequirements">
                        <p>Password must contain:</p>
                        <ul>
                            <li id="reqLength">At least 8 characters</li>
                            <li id="reqUppercase">At least one uppercase letter</li>
                            <li id="reqLowercase">At least one lowercase letter</li>
                            <li id="reqNumber">At least one number</li>
                            <li id="reqSpecial">At least one special character</li>
                        </ul>
                    </div>
                </div>

                <button type="submit" class="btn-primary">
                    <i class="fas fa-user-plus"></i> Add Employee
                </button>
            </form>
            
            <div class="navigation">
                <a href="/shopowner/html/shop_dashboard.html" class="btn-secondary">
                    <i class="fas fa-tachometer-alt"></i> Back to Dashboard
                </a>
            </div>
        </div>
    </div>

    <script>
        // Password toggle functionality
        function togglePassword(fieldId) {
            const field = document.getElementById(fieldId);
            const icon = field.nextElementSibling;
            
            if (field.type === "password") {
                field.type = "text";
                icon.classList.remove("fa-eye");
                icon.classList.add("fa-eye-slash");
            } else {
                field.type = "password";
                icon.classList.remove("fa-eye-slash");
                icon.classList.add("fa-eye");
            }
        }

        // Password validation
        document.getElementById('employeePassword').addEventListener('input', function() {
            validatePassword();
        });

        function validatePassword() {
            const password = document.getElementById('employeePassword').value;
            const confirmPassword = document.getElementById('confirmPassword').value;
            
            // Check password requirements
            const hasLength = password.length >= 8;
            const hasUppercase = /[A-Z]/.test(password);
            const hasLowercase = /[a-z]/.test(password);
            const hasNumber = /[0-9]/.test(password);
            const hasSpecial = /[!@#$%^&*]/.test(password);
            
            // Update requirement indicators
            document.getElementById('reqLength').style.color = hasLength ? 'green' : 'red';
            document.getElementById('reqUppercase').style.color = hasUppercase ? 'green' : 'red';
            document.getElementById('reqLowercase').style.color = hasLowercase ? 'green' : 'red';
            document.getElementById('reqNumber').style.color = hasNumber ? 'green' : 'red';
            document.getElementById('reqSpecial').style.color = hasSpecial ? 'green' : 'red';
            
            // Check if passwords match
            if (password && confirmPassword) {
                if (password !== confirmPassword) {
                    document.getElementById('confirmPassword').setCustomValidity("Passwords don't match");
                } else {
                    document.getElementById('confirmPassword').setCustomValidity('');
                }
            }
        }

        // Confirm password validation
        document.getElementById('confirmPassword').addEventListener('input', function() {
            validatePassword();
        });

        // Role-based access control
        document.addEventListener("DOMContentLoaded", () => {
            const userRole = localStorage.getItem('userRole');
            if (userRole === "employee") {
                document.querySelectorAll(".manager, .shopowner").forEach(el => el.style.display = "none");
            } else if (userRole === "manager") {
                document.querySelectorAll(".shopowner").forEach(el => el.style.display = "none");
            }

            // Philippine phone number formatting
            document.getElementById('employeePhone').addEventListener('input', function(e) {
                // Remove all non-digit characters
                let phoneNumber = e.target.value.replace(/\D/g, '');
                
                // Limit to 10 digits (Philippine mobile numbers are 10 digits without country code)
                if (phoneNumber.length > 10) {
                    phoneNumber = phoneNumber.substring(0, 10);
                }
                
                // Update the input value with just the digits
                e.target.value = phoneNumber;
            });

            // You can also add this to format it properly when submitting
            document.getElementById('addEmployeeForm').addEventListener('submit', function(e) {
                const phoneInput = document.getElementById('employeePhone');
                if (phoneInput.value) {
                    // Format as +639XXXXXXXXX before submitting
                    phoneInput.value = '+63' + phoneInput.value;
                }
            });
        });
    </script>
      
    <script src="/shopowner/js/shopowner_addemployee.js" type="module"></script>
</body>
</html>